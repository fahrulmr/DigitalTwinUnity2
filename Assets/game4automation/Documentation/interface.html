<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  <title>gam4automation DOC - Automation interfaces</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.0.0/normalize.min.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,300,700" rel="stylesheet" type="text/css">
  <link href="style/docs.css" rel="stylesheet">
</head>
<body>
  <div class="menu">
    <div class="logo">
      Content
    </div>
    <nav class="menu-nav">
      
        <ul class="nav">
          <span>Preparation</span>
          <ul class="nav">
            
              <li>
                <a href="installation.html">Installation</a>
              </li>
            
              <li>
                <a href="releasenotes.html">Release Notes</a>
              </li>
            
          </ul>
        </ul>
      
        <ul class="nav">
          <span>Basics</span>
          <ul class="nav">
            
              <li>
                <a href="userinterface.html">User Interface</a>
              </li>
            
              <li>
                <a href="runtimeui.html">Runtime UI</a>
              </li>
            
              <li>
                <a href="folderstructure.html">structure</a>
              </li>
            
              <li>
                <a href="importexport.html">Importing and exporting</a>
              </li>
            
              <li>
                <a href="demomodel.html">Demo Model</a>
              </li>
            
              <li>
                <a href="tutorial.html">Tutorial</a>
              </li>
            
              <li>
                <a href="physics.html">Physics</a>
              </li>
            
              <li>
                <a href="import3ddata.html">CAD import</a>
              </li>
            
              <li>
                <a href="cadlink.html">CADLink</a>
              </li>
            
              <li>
                <a href="pixyz.html">Import with PIXZ</a>
              </li>
            
              <li>
                <a href="cadupdater.html">CADUpdater</a>
              </li>
            
              <li>
                <a href="LargeAssemblies.html">Large Assemblies</a>
              </li>
            
              <li>
                <a href="SelectionWindow.html">Selection Window</a>
              </li>
            
              <li>
                <a href="CADChecker.html">CAD Checker</a>
              </li>
            
              <li>
                <a href="parts4cad.html">parts4cad</a>
              </li>
            
          </ul>
        </ul>
      
        <ul class="nav">
          <span>Components</span>
          <ul class="nav">
            
              <li>
                <a href="game4automation.html">Game4Automation</a>
              </li>
            
              <li>
                <a href="source.html">Source</a>
              </li>
            
              <li>
                <a href="sink.html">Sink</a>
              </li>
            
              <li>
                <a href="mu.html">MU</a>
              </li>
            
              <li>
                <a href="partchanger.html">PartChanger</a>
              </li>
            
              <li>
                <a href="motionaxis.html">Motions</a>
              </li>
            
              <li>
                <a href="group.html">Group</a>
              </li>
            
              <li>
                <a href="kinematic.html">Kinematics</a>
              </li>
            
              <li>
                <a href="drive.html">Drive</a>
              </li>
            
              <li>
                <a href="CAM.html">CAM</a>
              </li>
            
              <li>
                <a href="transportsurface.html">Transport Surface</a>
              </li>
            
              <li>
                <a href="drivebehaviour.html">Drive Behavior</a>
              </li>
            
              <li>
                <a href="chain.html">Chain</a>
              </li>
            
              <li>
                <a href="chainelement.html">Chain element</a>
              </li>
            
              <li>
                <a href="sensor.html">Sensor</a>
              </li>
            
              <li>
                <a href="sensor.html">Sensor</a>
              </li>
            
              <li>
                <a href="grip.html">Grip</a>
              </li>
            
              <li>
                <a href="lamp.html">Lamp</a>
              </li>
            
              <li>
                <a href="uicomponents.html">UI components</a>
              </li>
            
              <li>
                <a href="plc.html">PLC</a>
              </li>
            
              <li>
                <a href="">Automation Interfaces</a>
              </li>
            
              <li>
                <a href="s7tcpip.html">S7-TCPIP</a>
              </li>
            
              <li>
                <a href="twincat.html">TwinCAT</a>
              </li>
            
              <li>
                <a href="sharedmemory.html">Shared Memory</a>
              </li>
            
              <li>
                <a href="plcsimadvanced.html">PLCSIM Advanced</a>
              </li>
            
              <li>
                <a href="opcua.html">OPC UA</a>
              </li>
            
              <li>
                <a href="robodk.html">RoboDK</a>
              </li>
            
              <li>
                <a href="modbus.html">Modbus</a>
              </li>
            
              <li>
                <a href="custominterfaces.html">Custom interfaces</a>
              </li>
            
              <li>
                <a href="playmaker.html">Visual Scripting</a>
              </li>
            
          </ul>
        </ul>
      
        <ul class="nav">
          <span>Advanced</span>
          <ul class="nav">
            
              <li>
                <a href="combilerdefines.html">Compiler Defines</a>
              </li>
            
              <li>
                <a href="assemblydefinitions.html">Assembly Defintions</a>
              </li>
            
              <li>
                <a href="yourown.html">Starting your own Project</a>
              </li>
            
          </ul>
        </ul>
      
    </nav>
    <a class="footer" href="https://game4automation.com">
      Game4Automation
    </a>
  </div>
  <div class="page">
   
    <div class="page-content">
	<p>This is the offline version of the documentation. We recommend you to use the <a href="https://game4automation.com/documentation/current/index.html">online documentation.</a></p>
 <h1 id="Automation-Interfaces"><a href="#Automation-Interfaces" class="headerlink" title="Automation Interfaces"></a>Automation Interfaces</h1><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>Automation Interfaces handle the communication between real or virtual automation controllers. For each type of communication, a special interface is required. The interfaces currently available are for Siemens S7 (S7-300,400,1200,1500,Sinumerik, Simotion), Simit, PLCSim-Advanced (the virtual Siemens S7 1500 PLC) and OPC-UA.</p>
<p>All interfaces are using standard PLCInput and PLCOutput objects (like PLCInputFloat or PLCOutputBool) for storing signal values. The Interface itself handles the real-time values of the signals. Some interfaces provide the ability to import all signals automatically and to create the suitable PLCInput or PLCOutput objects in the Game4Automation hierarchy automatically. Sometimes the signals can be imported by communication with the controller itself, or sometimes a signal list used for programming the automation controller can be exported and used.<br><img src="images\interfaces-structure.png"></p>
<p>The Signals are connected to the input and output properties of the Behavior Models.</p>
<p>This tutorial explains the relation between Signals and Behavior Models:<br><div class="video-container"><iframe src="//www.youtube.com/embed/sCKEi-6EKYQ" frameborder="0" allowfullscreen></iframe></div></p>
<p>The following Signal types are supported by all Interfaces. In most cases the PLC itself can support more data types. For example Signed Int and Unsigned Int, are all transfered to the corresponding base type in Game4Automation.</p>
<table>
<thead>
<tr>
<th>Signal Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>PLCInputBool</td>
<td>A PLC Input which is a boolean value (true/false)</td>
</tr>
<tr>
<td>PLCInputInt</td>
<td>A PLC Input which is an integer value (can be also a Byte, UInt, SInt … on the PLC-Side)</td>
</tr>
<tr>
<td>PLCInputFloat</td>
<td>A PLC Input which is a float value (can be also double, single on the PLC-Side)</td>
</tr>
<tr>
<td>PLCOutputBool</td>
<td>A PLC Output which is a boolean value (true/false)</td>
</tr>
<tr>
<td>PLCOutputInt</td>
<td>A PLC Output which is an integer value (can be also a Byte, UInt, SInt … on the PLC-Side)</td>
</tr>
<tr>
<td>PLCOutputFloat</td>
<td>A PLC Output which is an integer value (can be also a Byte, UInt, SInt … on the PLC-Side)</td>
</tr>
</tbody>
</table>
<h2 id="Check-Signal-status-and-connections-to-Behavior-models"><a href="#Check-Signal-status-and-connections-to-Behavior-models" class="headerlink" title="Check Signal status and connections to Behavior models"></a>Check Signal status and connections to Behavior models</h2><p>You can check all signals in the Hierarchy view of your model:<br><img src="images\interface-signalstatus.png"></p>
<p>PLCInputs are shown in red and PLCOutputs are shown in green. All signals which have not been connected to Game4Automation behavior models (this means all signals, which are currently not controlling the model or are not getting any information from the model) are shown in brackets.</p>
<p>It is possible to check on the Signal component itself the connected Behavior models in the section <em>Signal Connection Info</em>:<br><img src="images\interface-signalinfo.png"></p>
<h2 id="Forcing-overriding-signals"><a href="#Forcing-overriding-signals" class="headerlink" title="Forcing (overriding) signals"></a>Forcing (overriding) signals</h2><p>Signals can be forced to a certain value. By doing this, all connected components receive the forced value and not the value of the current input or output. Signals can be forced by setting <em>Settings&gt;Override</em> in the Signal to true. The value is now defined by the Value you define in <em>Value Override</em>. Forced signals are always displayed in italic letters.</p>
<img src="images\interface-forcing.png">
<p><br><br>For boolean values you can force them just by clicking on the value. This will force the value and toggle between true and false. For unforcing the value back again you need to click on the exclamation mark. </p>
<h2 id="Signal-Events"><a href="#Signal-Events" class="headerlink" title="Signal Events"></a>Signal Events</h2><h3 id="Signals-in-Behaviour-Models"><a href="#Signals-in-Behaviour-Models" class="headerlink" title="Signals in Behaviour Models"></a>Signals in Behaviour Models</h3><p>Usually Signals should be used by Behavior Models which are defined by a script.<br>In the Behaviour model references are used to identify the signals which are attached to the Behavior Model. Here is a simple example of a Behavior Model which can be attached to a Sensor: </p>
<figure class="highlight c"><figcaption><span>Simple Sensor Behavior Model#</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">[RequireComponent(typeof(Sensor))]</span><br><span class="line">  <span class="comment">//! The Sensor_Standard component is providing the Sensor behavior and connection to the PLC inputs and outputs.</span></span><br><span class="line">  <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Sensor_Standard</span> :</span> BehaviorInterface</span><br><span class="line">  &#123;</span><br><span class="line">     </span><br><span class="line">      [Header(<span class="string">"Settings"</span>)] <span class="keyword">public</span> <span class="keyword">bool</span> NormallyClosed = <span class="literal">false</span>;  <span class="comment">//!&lt; Defines if sensor signal is *true* if occupied (*NormallyClosed=false*) of if signal is *false* if occupied (*NormallyClosed=true*)</span></span><br><span class="line">      [Header(<span class="string">"Interface Connection"</span>)] <span class="keyword">public</span> PLCInputBool Occupied; <span class="comment">//! Boolean PLC input for the Sensor signal.</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">private</span> Sensor Sensor;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// Use this for initialization</span></span><br><span class="line">      <span class="function"><span class="keyword">void</span> <span class="title">Start</span><span class="params">()</span></span></span><br><span class="line"><span class="function">      </span>&#123;</span><br><span class="line">          Sensor = GetComponent&lt;Sensor&gt;();</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Update is called once per frame</span></span><br><span class="line">      <span class="function"><span class="keyword">void</span> <span class="title">Update</span><span class="params">()</span></span></span><br><span class="line"><span class="function">      </span>&#123;</span><br><span class="line">          <span class="keyword">bool</span> occupied = <span class="literal">false</span>;</span><br><span class="line">      </span><br><span class="line">          <span class="comment">// Set Behavior Outputs</span></span><br><span class="line">          <span class="keyword">if</span> (NormallyClosed)</span><br><span class="line">          &#123;</span><br><span class="line">              occupied = !Sensor.Occupied;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">else</span></span><br><span class="line">          &#123;</span><br><span class="line">              occupied = Sensor.Occupied;</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          <span class="comment">// Set external PLC Outputs</span></span><br><span class="line">          <span class="keyword">if</span> (Occupied != null)</span><br><span class="line">              Occupied.Value = occupied;</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>The public variable <em>public PLCInputBool Occupied</em> acts as referene to the Input Signal. Because the Sensor Behavior Model is attached to a GameObject with the Sensor base model also attached to it can get a reference to the sensor. In the Update cycle the Behavior Model is transferring the status between the Signals and the Sensor base object itself. Behavior Models give you the flexibility to program different behaviors and to still use the same base objects.</p>
<p>You can see the relations in this picture:<br><img src="images\interfaces-sensor.png"></p>
<h3 id="Unity-Events-and-Signals"><a href="#Unity-Events-and-Signals" class="headerlink" title="Unity Events and Signals"></a>Unity Events and Signals</h3><p>You can receive Unity Events as soon as a signal is changed. To do so you can select in the Unity Editor a method on each signal which should be called once the signal is changing it’s status:<br><img src="images\interfaces-signalevent.png"></p>
<p>The method which is called receives as a parameter the Signal. The method must be defined like this:<br><figure class="highlight c"><figcaption><span>Signal Changed Event#</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SignalChangedEditor</span><span class="params">(Signal signal)</span></span></span><br><span class="line"><span class="function">     </span>&#123;</span><br><span class="line">         Debug.Log(<span class="string">"Signal Changed Editor "</span> + signal.ToString());</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="Subscribing-for-Signal-changed-events-in-a-method"><a href="#Subscribing-for-Signal-changed-events-in-a-method" class="headerlink" title="Subscribing for Signal changed events in a method"></a>Subscribing for Signal changed events in a method</h3><p>Another alternative is to subscribe to the Signal changed events in a method. You want see anything in the Unity Editor if you do so. The subscription is done each time Unity is starting the simulation. Here is an example:<br><figure class="highlight c"><figcaption><span>Subscribe for signal changes#</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Start</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// Register Event During Runtime</span></span><br><span class="line">        var com = GetComponent&lt;PLCInputBool&gt;();</span><br><span class="line">        com.SignalChanged += SignalChangedRuntime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SignalChangedRuntime</span><span class="params">(Signal signal)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Debug.Log(<span class="string">"Signal Changed Runtime "</span> + signal.ToString());</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><br>Please check the <a href="https://game4automation.com/documentation/current/apidoc/html/classgame4automation_1_1_signal.html" target="_blank" rel="noopener"> Game4Automation Class Reference</a> for more information about the properties and methods of this component.</p>

	  <br>

	  <p><font size="1">&copy; 2019 in2Sight GmbH <a href="https://game4automation.com"> https://game4automation.com </a> - All rights reserved. No part of this publication may be reproduced, distributed, or transmitted in any form or by any means, including printing, saving, photocopying, recording, or other electronic or mechanical methods, without the prior written permission of the publisher.</font></p>
    </div>
	
  </div>
  <div class="switch-page">
    
    
  </div>
</body>
</html>